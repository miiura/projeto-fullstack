{"ast":null,"code":"import axios from \"axios\";\n\n// API EXTERNA (cotação)\nconst BASE_URL = \"https://api.exchangerate-api.com/v4/latest\";\nexport const convertCurrencyExternal = async (fromCurrency, toCurrency, amount) => {\n  try {\n    const response = await axios.get(`${BASE_URL}/${fromCurrency}`);\n    const rate = response.data.rates[toCurrency];\n    if (!rate) throw new Error(`Taxa para ${toCurrency} não encontrada`);\n    const result = (amount * rate).toFixed(2);\n    const timestamp = new Date().toLocaleTimeString();\n    return {\n      result,\n      rate,\n      timestamp\n    };\n  } catch (error) {\n    console.error(\"Erro na conversão externa:\", error);\n    throw new Error(\"Erro ao converter moeda.\");\n  }\n};\n\n// API INTERNA (backend)\nexport const api = axios.create({\n  baseURL: \"http://localhost:4000/api\" // URL do backend\n});\n\n// Enviar token automaticamente nas requisições\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"token\");\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\n// auth\nexport const loginUser = async (email, password) => {\n  return api.post(\"/auth/login\", {\n    usernameOrEmail: email,\n    password\n  });\n};\nexport const registerUser = async (email, password) => {\n  return api.post(\"/auth/register\", {\n    email,\n    password\n  });\n};\n\n// conversão\nexport const convertBackend = async (from, to, amount) => {\n  return api.post(\"/currency/convert\", {\n    from,\n    to,\n    amount\n  });\n};\n\n// histórico\nexport const getHistory = async () => {\n  return api.get(\"/currency/history\");\n};","map":{"version":3,"names":["axios","BASE_URL","convertCurrencyExternal","fromCurrency","toCurrency","amount","response","get","rate","data","rates","Error","result","toFixed","timestamp","Date","toLocaleTimeString","error","console","api","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","loginUser","email","password","post","usernameOrEmail","registerUser","convertBackend","from","to","getHistory"],"sources":["C:/Users/Leda Miura/Documents/GitHub/projeto-fullstack/frontend/src/contexts/api.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\n// API EXTERNA (cotação)\r\nconst BASE_URL = \"https://api.exchangerate-api.com/v4/latest\";\r\n\r\nexport const convertCurrencyExternal = async (fromCurrency, toCurrency, amount) => {\r\n  try {\r\n    const response = await axios.get(`${BASE_URL}/${fromCurrency}`);\r\n    const rate = response.data.rates[toCurrency];\r\n\r\n    if (!rate) throw new Error(`Taxa para ${toCurrency} não encontrada`);\r\n\r\n    const result = (amount * rate).toFixed(2);\r\n    const timestamp = new Date().toLocaleTimeString();\r\n\r\n    return { result, rate, timestamp };\r\n  } catch (error) {\r\n    console.error(\"Erro na conversão externa:\", error);\r\n    throw new Error(\"Erro ao converter moeda.\");\r\n  }\r\n};\r\n\r\n// API INTERNA (backend)\r\nexport const api = axios.create({\r\n  baseURL: \"http://localhost:4000/api\", // URL do backend\r\n});\r\n\r\n// Enviar token automaticamente nas requisições\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (token) config.headers.Authorization = `Bearer ${token}`;\r\n  return config;\r\n});\r\n\r\n// auth\r\nexport const loginUser = async (email, password) => {\r\n  return api.post(\"/auth/login\", { usernameOrEmail: email, password });\r\n};\r\n\r\nexport const registerUser = async (email, password) => {\r\n  return api.post(\"/auth/register\", { email, password });\r\n};\r\n\r\n// conversão\r\nexport const convertBackend = async (from, to, amount) => {\r\n  return api.post(\"/currency/convert\", { from, to, amount });\r\n};\r\n\r\n// histórico\r\nexport const getHistory = async () => {\r\n  return api.get(\"/currency/history\");\r\n};\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,MAAMC,QAAQ,GAAG,4CAA4C;AAE7D,OAAO,MAAMC,uBAAuB,GAAG,MAAAA,CAAOC,YAAY,EAAEC,UAAU,EAAEC,MAAM,KAAK;EACjF,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACO,GAAG,CAAC,GAAGN,QAAQ,IAAIE,YAAY,EAAE,CAAC;IAC/D,MAAMK,IAAI,GAAGF,QAAQ,CAACG,IAAI,CAACC,KAAK,CAACN,UAAU,CAAC;IAE5C,IAAI,CAACI,IAAI,EAAE,MAAM,IAAIG,KAAK,CAAC,aAAaP,UAAU,iBAAiB,CAAC;IAEpE,MAAMQ,MAAM,GAAG,CAACP,MAAM,GAAGG,IAAI,EAAEK,OAAO,CAAC,CAAC,CAAC;IACzC,MAAMC,SAAS,GAAG,IAAIC,IAAI,CAAC,CAAC,CAACC,kBAAkB,CAAC,CAAC;IAEjD,OAAO;MAAEJ,MAAM;MAAEJ,IAAI;MAAEM;IAAU,CAAC;EACpC,CAAC,CAAC,OAAOG,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;IAClD,MAAM,IAAIN,KAAK,CAAC,0BAA0B,CAAC;EAC7C;AACF,CAAC;;AAED;AACA,OAAO,MAAMQ,GAAG,GAAGnB,KAAK,CAACoB,MAAM,CAAC;EAC9BC,OAAO,EAAE,2BAA2B,CAAE;AACxC,CAAC,CAAC;;AAEF;AACAF,GAAG,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EACvC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAED,MAAM,CAACI,OAAO,CAACC,aAAa,GAAG,UAAUJ,KAAK,EAAE;EAC3D,OAAOD,MAAM;AACf,CAAC,CAAC;;AAEF;AACA,OAAO,MAAMM,SAAS,GAAG,MAAAA,CAAOC,KAAK,EAAEC,QAAQ,KAAK;EAClD,OAAOd,GAAG,CAACe,IAAI,CAAC,aAAa,EAAE;IAAEC,eAAe,EAAEH,KAAK;IAAEC;EAAS,CAAC,CAAC;AACtE,CAAC;AAED,OAAO,MAAMG,YAAY,GAAG,MAAAA,CAAOJ,KAAK,EAAEC,QAAQ,KAAK;EACrD,OAAOd,GAAG,CAACe,IAAI,CAAC,gBAAgB,EAAE;IAAEF,KAAK;IAAEC;EAAS,CAAC,CAAC;AACxD,CAAC;;AAED;AACA,OAAO,MAAMI,cAAc,GAAG,MAAAA,CAAOC,IAAI,EAAEC,EAAE,EAAElC,MAAM,KAAK;EACxD,OAAOc,GAAG,CAACe,IAAI,CAAC,mBAAmB,EAAE;IAAEI,IAAI;IAAEC,EAAE;IAAElC;EAAO,CAAC,CAAC;AAC5D,CAAC;;AAED;AACA,OAAO,MAAMmC,UAAU,GAAG,MAAAA,CAAA,KAAY;EACpC,OAAOrB,GAAG,CAACZ,GAAG,CAAC,mBAAmB,CAAC;AACrC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}